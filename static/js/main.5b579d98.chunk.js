(this.webpackJsonp11=this.webpackJsonp11||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(13),r=n.n(o),a=n(8),i=n(9),l=n(23),u=n.n(l),s=n(24),j={user:function(){try{var e=localStorage.getItem("user");if(null===e)return;return JSON.parse(e)}catch(t){return}}()},b=Object(i.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"USER_LOGIN":return{user:c};case"USER_LOGOUT":return{user:null};default:return e}}),j,Object(i.a)(s.a,u.a)),p=function(e){return function(t){return h(1e3).then((function(){return t({type:"USER_LOGIN",payload:{role:e,token:"token7j34e8ffdjg348"}})})).then((function(e){console.log("THEN: ",e),localStorage.setItem("user",JSON.stringify(e))}))}},h=function(e){var t,n,c=new Promise((function(c,o){t=setTimeout(c,e),n=o}));return c.cancel=function(){clearTimeout(t),n(Error("Cancelled"))},c};var O=n(10),f=n(26),m=n(3),d=n(15),g=n(25),x=n(1),v=function(e){var t=e.history,n=Object(c.useState)(""),o=Object(g.a)(n,2),r=o[0],i=o[1],l=Object(a.c)();return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Logging in...",[r]),l(p({role:r})).then((function(){r?t.push("/main"):t.push("/login")}))},children:[Object(x.jsx)("input",{name:"role",type:"text",value:r,onChange:function(e){return i(e.target.value)},placeholder:"Your Name"}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{children:"Login"})]})},S=Object(m.f)((function(e){var t=e.history,n=Object(a.c)();Object(c.useEffect)((function(){n((function(e){return localStorage.clear(),e({type:"USER_LOGOUT"})}))}),[n]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:"Back to Main page..."}),Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),t.push("/login")},children:"Go back"})]})})),y=(n(37),function(e){return Object(x.jsx)("img",{className:"image",src:e.img,alt:"avatar"})}),C={padding:"0.2rem"},E=function(e){return Object(x.jsx)("p",{style:C,children:e.details})};function N(e){return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsxs)("div",{className:"head",children:[Object(x.jsx)("p",{children:e.count}),Object(x.jsx)("h2",{children:e.name})]}),Object(x.jsx)(y,{img:e.imgUrl}),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("h4",{children:["Call: ",Object(x.jsx)("button",{children:e.phone})]}),Object(x.jsx)(E,{details:e.email})]})]})}var U=function(){return Math.floor(100*Math.random()+1)},L="https://randomuser.me/api/portraits/men/",k=[{name:"Ben Smith",imgUrl:"".concat(L).concat(U(),".jpg"),phone:"555-555-555"},{name:"Mark Hill",imgUrl:"".concat(L).concat(U(),".jpg"),phone:"999-999-9999"},{name:"Sam Shoe",imgUrl:"".concat(L).concat(U(),".jpg"),phone:"444-333-5678"},{name:"Larry Cox",imgUrl:"".concat(L).concat(U(),".jpg"),phone:"684-344-5678"}];function I(){var e=k.map((function(e,t){return Object(x.jsx)(N,{name:e.name,imgUrl:e.imgUrl,phone:e.phone,email:e.email,count:t+1},t)}));return Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("h1",{children:"My Contacts"}),e]})}var T=function(e){var t=e.history,n=Object(c.useCallback)((function(){var e,n=localStorage.getItem("user");if((e=JSON.parse(n)).payload.role)return e.payload.role.role;t.push("/login")}),[t]);return Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("h1",{children:"Hello ".concat(n())}),Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),t.push("/logout")},children:"Logout"}),Object(x.jsx)(I,{})]})},w=function(){return{type:"INITIALIZED_SUCCESS"}},R=function(e){var t=e.component,n=Object(f.a)(e,["component"]),c=Object(a.d)((function(e){return Boolean(e.user)}));return c?console.log("PrivateRoute: logged in"):console.log("PrivateRoute: not logged in!"),Object(x.jsx)(m.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return c?Object(x.jsx)(t,Object(O.a)({},e)):Object(x.jsx)(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},P=Object(i.c)(m.f,Object(a.b)(null,{initializeApp:function(){return function(e){var t=e(p());Promise.all([t]).then((function(){e(w())}))}}}))((function(e){var t=Object(c.useCallback)((function(e){alert("promiseRejectionEvent")}),[]);return Object(c.useEffect)((function(){e.initializeApp()}),[e]),Object(c.useEffect)((function(){window.addEventListener("unhandledrejection",t)}),[t]),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(m.b,{name:"login",path:"/login",component:v,props:e}),Object(x.jsx)(R,{name:"logout",path:"/logout",component:S,props:e}),Object(x.jsx)(R,{name:"main",path:"/main",component:T,props:e}),Object(x.jsx)(m.a,{from:"/",to:"/login",props:e})]})})),B=function(){return Object(x.jsx)(d.a,{children:Object(x.jsx)(P,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))},G=document.getElementById("root");r.a.render(Object(x.jsx)(a.a,{store:b,children:Object(x.jsx)(B,{})}),G),D()}},[[38,1,2]]]);
//# sourceMappingURL=main.5b579d98.chunk.js.map