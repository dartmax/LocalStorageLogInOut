(this.webpackJsonp11=this.webpackJsonp11||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(14),o=n.n(r),a=n(7),i=n(9),u=n(23),l=n.n(u),s=n(24),j={user:function(){try{var e=localStorage.getItem("user");if(null===e)return;return JSON.parse(e)}catch(t){return}}()},b=Object(i.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"USER_LOGIN":return{user:c.role};case"USER_LOGOUT":return{user:null};default:return e}}),j,Object(i.a)(s.a,l.a)),f=function(e){return e.user.role},O=function(e){return function(t){return m(1e3).then((function(){return t({type:"USER_LOGIN",payload:{role:e,token:"token7j34e8ffdjg348"}})})).then((function(e){console.log("THEN: ",e),localStorage.setItem("user",JSON.stringify(e))}))}},m=function(e){var t,n,c=new Promise((function(c,r){t=setTimeout(c,e),n=r}));return c.cancel=function(){clearTimeout(t),n(Error("Cancelled"))},c};var h=n(10),d=n(26),p=n(3),g=n(12),x=n(25),v=n(1),S=Object(p.f)((function(e){var t=e.history,n=Object(c.useState)(""),r=Object(x.a)(n,2),o=r[0],i=r[1],u=Object(a.c)();return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Logging in...",[o]),u(O({role:o})).then((function(){t.push("/main")}))},children:[Object(v.jsx)("input",{name:"role",type:"text",value:o,onChange:function(e){return i(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{children:"Login"})]})})),y=Object(p.f)((function(e){var t=e.history,n=Object(a.c)();Object(c.useEffect)((function(){n((function(e){return localStorage.clear(),e({type:"USER_LOGOUT"})}))}),[n]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:"Back to Main page..."}),Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),t.push("/login")},children:"Go back"})]})})),E=(n(37),function(e){return Object(v.jsx)("img",{className:"image",src:e.img,alt:"avatar"})}),U={padding:"0.2rem"},N=function(e){return Object(v.jsx)("p",{style:U,children:e.details})};function C(e){return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsxs)("div",{className:"head",children:[Object(v.jsx)("p",{children:e.count}),Object(v.jsx)("h2",{children:e.name})]}),Object(v.jsx)(E,{img:e.imgUrl}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)(N,{details:e.phone}),Object(v.jsx)(N,{details:e.email})]})]})}var L=function(){return Math.floor(100*Math.random()+1)},I="https://randomuser.me/api/portraits/men/",k=[{name:"Ben Smith",imgUrl:"".concat(I).concat(L(),".jpg"),phone:"555-555-555"},{name:"Mark Hill",imgUrl:"".concat(I).concat(L(),".jpg"),phone:"999-999-9999"},{name:"Sam Shoe",imgUrl:"".concat(I).concat(L(),".jpg"),phone:"444-333-5678"},{name:"Larry Cox",imgUrl:"".concat(I).concat(L(),".jpg"),phone:"684-344-5678"}];function T(){var e=k.map((function(e,t){return Object(v.jsx)(C,{name:e.name,imgUrl:e.imgUrl,phone:e.phone,email:e.email,count:t+1},t)}));return Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)("h1",{children:"My Contacts"}),e]})}var w=Object(p.f)((function(e){var t=e.history;Object(a.d)(f);return Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("h1",{children:"Hello ".concat(function(){var e=localStorage.getItem("user");if(e)return JSON.parse(e).payload.role.role}())}),Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),t.push("/logout")},children:"Logout"}),Object(v.jsx)(T,{})]})})),R=function(){return{type:"INITIALIZED_SUCCESS"}},P=function(e){var t=e.component,n=Object(d.a)(e,["component"]),c=Object(a.d)((function(e){return Boolean(e.user)}));return c?console.log("PrivateRoute: logged in"):console.log("PrivateRoute: not logged in!"),Object(v.jsx)(p.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return c?Object(v.jsx)(t,Object(h.a)({},e)):Object(v.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},B=Object(i.c)(p.f,Object(a.b)(null,{initializeApp:function(){return function(e){var t=e(O());Promise.all([t]).then((function(){e(R())}))}}}))((function(e){var t=Object(c.useCallback)((function(e){alert("promiseRejectionEvent")}),[]);return Object(c.useEffect)((function(){e.initializeApp()}),[e]),Object(c.useEffect)((function(){window.addEventListener("unhandledrejection",t)}),[t]),Object(v.jsxs)(g.a,{children:[Object(v.jsx)(p.b,{name:"login",path:"/login",component:S}),Object(v.jsx)(P,{name:"logout",path:"/logout",component:y}),Object(v.jsx)(P,{name:"main",path:"/main",component:w}),Object(v.jsx)(p.a,{from:"/",to:"main"})]})})),D=function(){return Object(v.jsx)(g.a,{children:Object(v.jsx)(B,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))},J=document.getElementById("root");o.a.render(Object(v.jsx)(a.a,{store:b,children:Object(v.jsx)(D,{})}),J),G()}},[[38,1,2]]]);
//# sourceMappingURL=main.d61f1d3f.chunk.js.map